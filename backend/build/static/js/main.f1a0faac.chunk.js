(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var o=n(3),c=n.n(o),i=n(10),r=n.n(i),s=(n(21),n(9)),a=(n(22),n(13)),u=n.n(a),d=n(4),l=1,f=2,h=function e(t,n){Object(d.a)(this,e),this.coord=t,this.type=n},j=n(0),b=function(e){var t,n=e.token,o=e.type,c=e.onTokenSelected;t=n&&n.isSelected?"token-selected":n&&!n.isSelected?"token":o===f?"tile-exit":"tile";return Object(j.jsx)("div",{className:t,onClick:function(){n&&c(n)}})},p=n(16),v=(n(30),new WebSocket("ws://127.0.0.1:3001"));v.onopen=function(){};var O=[],y=[];v.onerror=function(e){console.log("Sorry, but there's some problem with your connection or the server is down.")},v.onmessage=function(e){try{var t=JSON.parse(e.data)}catch(c){return void console.log("Invalid JSON: ",e.data)}var n,o=Object(p.a)(O);try{for(o.s();!(n=o.n()).done;){n.value.handle(t)}}catch(i){o.e(i)}finally{o.f()}},setInterval((function(){1!==v.readyState&&console.log("Error missing connection")}),3e3);var m=function(e){v.send(JSON.stringify({type:e}))},x=function(e){y.includes(e)&&m(e)},S=function(e){v.send(e)},g=function(){x("RIGHT")},k=function(){x("LEFT")},w=function(){x("DOWN")},N=function(){x("UP")},E=function(e){y=e},I=function(){m("RESET")},J=function(e){(O=O.filter((function(t){return t.id!==e.id}))).push(e)},T=n(6),C=n.n(T),R=function(e){var t=e.grid,n=e.tokens,o=function(e){S(JSON.stringify({type:"SELECTED",selected:e.id}))};return Object(j.jsx)("div",{className:"game-board",onKeyPress:function(e){"s"===e.key?w():"w"===e.key?N():"a"===e.key?k():"d"===e.key&&g()},tabIndex:0,children:Object(j.jsx)(u.a,{width:600/t.length,gap:0,children:t.map((function(e){return e.map((function(e){return Object(j.jsx)(b,{type:e.type,token:(t=e.coord,n.filter((function(e){return C()(e.coord,t)}))[0]),onTokenSelected:o},e.coord.toString());var t}))}))})})},D=n(17),L=function(){function e(t,n){Object(d.a)(this,e),this.x=t,this.y=n}return Object(D.a)(e,[{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}]),e}(),M=function e(t,n,o){Object(d.a)(this,e),this.id=t,this.coord=n,this.isSelected=o},P=function(e){var t=e.moves;return console.log(t),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Moves:"}),Object(j.jsx)("ul",{children:t.map((function(e){return Object(j.jsx)("li",{children:e})}))})]})},W=function(e){var t=parseInt(e.x),n=parseInt(e.y);return new L(t,n)},A=function(e){return e.tokens.map((function(t,n){return new M(n,W(t),e.selected===n)}))};var B=function(){var e=Object(o.useState)([[]]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)([]),r=Object(s.a)(i,2),a=r[0],u=r[1],d=Object(o.useState)([]),b=Object(s.a)(d,2),p=b[0],v=b[1];return J({id:"app-updates",handle:function(e){"selected-id"===e.type?(console.log(e),u(A(e.data))):"board-update"===e.type?(c(function(e){for(var t=[],n=W(e.exit),o=0;o<e.height;o++){for(var c=[],i=0;i<e.width;i++){var r=new L(i,o),s=C()(n,r)?f:l;c.push(new h(r,s))}t.push(c)}return t}(e.data)),u(A(e.data))):"win"===e.type?alert("You have won the game!"):"movements"===e.type&&(E(e.data.movements),v(e.data.movements))}}),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"board-space",children:[Object(j.jsxs)("div",{className:"board-controls",children:[Object(j.jsx)(P,{moves:p}),Object(j.jsx)("button",{onClick:function(e){I()},children:"Reset"})]}),Object(j.jsx)(R,{grid:n,tokens:a})]})})};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(B,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.f1a0faac.chunk.js.map