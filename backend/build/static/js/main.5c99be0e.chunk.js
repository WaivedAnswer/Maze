(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var o=n(3),c=n.n(o),i=n(10),r=n.n(i),s=(n(21),n(9)),a=(n(22),n(13)),u=n.n(a),d=n(4),l=1,f=2,h=function e(t,n){Object(d.a)(this,e),this.coord=t,this.type=n},j=n(0),b=function(e){var t,n=e.token,o=e.type,c=e.onTokenSelected;t=n&&n.isSelected?"token-selected":n&&!n.isSelected?"token":o===f?"tile-exit":"tile";return Object(j.jsx)("div",{className:t,onClick:function(){n&&c(n)}})},p=n(16),v=(n(30),"wss://"+window.location.host),O=new WebSocket(v);O.onopen=function(){};var y=[],m=[];O.onerror=function(e){console.log("Sorry, but there's some problem with your connection or the server is down.")},O.onmessage=function(e){try{var t=JSON.parse(e.data)}catch(c){return void console.log("Invalid JSON: ",e.data)}var n,o=Object(p.a)(y);try{for(o.s();!(n=o.n()).done;){n.value.handle(t)}}catch(i){o.e(i)}finally{o.f()}},setInterval((function(){1!==O.readyState&&console.log("Error missing connection")}),3e3);var x=function(e){O.send(JSON.stringify({type:e}))},S=function(e){m.includes(e)&&x(e)},g=function(e){O.send(e)},k=function(){S("RIGHT")},w=function(){S("LEFT")},N=function(){S("DOWN")},E=function(){S("UP")},I=function(e){m=e},J=function(){x("RESET")},T=function(e){(y=y.filter((function(t){return t.id!==e.id}))).push(e)},C=n(6),R=n.n(C),D=function(e){var t=e.grid,n=e.tokens,o=function(e){g(JSON.stringify({type:"SELECTED",selected:e.id}))};return Object(j.jsx)("div",{className:"game-board",onKeyPress:function(e){"s"===e.key?N():"w"===e.key?E():"a"===e.key?w():"d"===e.key&&k()},tabIndex:0,children:Object(j.jsx)(u.a,{width:600/t.length,gap:0,children:t.map((function(e){return e.map((function(e){return Object(j.jsx)(b,{type:e.type,token:(t=e.coord,n.filter((function(e){return R()(e.coord,t)}))[0]),onTokenSelected:o},e.coord.toString());var t}))}))})})},L=n(17),M=function(){function e(t,n){Object(d.a)(this,e),this.x=t,this.y=n}return Object(L.a)(e,[{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}]),e}(),P=function e(t,n,o){Object(d.a)(this,e),this.id=t,this.coord=n,this.isSelected=o},W=function(e){var t=e.moves;return console.log(t),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Moves:"}),Object(j.jsx)("ul",{children:t.map((function(e){return Object(j.jsx)("li",{children:e})}))})]})},A=function(e){var t=parseInt(e.x),n=parseInt(e.y);return new M(t,n)},B=function(e){return e.tokens.map((function(t,n){return new P(n,A(t),e.selected===n)}))};var F=function(){var e=Object(o.useState)([[]]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)([]),r=Object(s.a)(i,2),a=r[0],u=r[1],d=Object(o.useState)([]),b=Object(s.a)(d,2),p=b[0],v=b[1];return T({id:"app-updates",handle:function(e){"selected-id"===e.type?(console.log(e),u(B(e.data))):"board-update"===e.type?(c(function(e){for(var t=[],n=A(e.exit),o=0;o<e.height;o++){for(var c=[],i=0;i<e.width;i++){var r=new M(i,o),s=R()(n,r)?f:l;c.push(new h(r,s))}t.push(c)}return t}(e.data)),u(B(e.data))):"win"===e.type?alert("You have won the game!"):"movements"===e.type&&(I(e.data.movements),v(e.data.movements))}}),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"board-space",children:[Object(j.jsxs)("div",{className:"board-controls",children:[Object(j.jsx)(W,{moves:p}),Object(j.jsx)("button",{onClick:function(e){J()},children:"Reset"})]}),Object(j.jsx)(D,{grid:n,tokens:a})]})})};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.5c99be0e.chunk.js.map